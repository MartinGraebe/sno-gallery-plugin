{"version":3,"sources":["admin.min.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","jQuery","document","ready","image_modal","gallery_modal","click","preventDefault","wp","media","title","snoxel8v_main_image","button","text","library","type","on","attachment","state","get","first","toJSON","val","url","append","sizes","thumbnail","attr","open","multiple","images","ids","split","forEach","id","fetch","add","addClass","metaDataString","imageIDs","imageHtml","each","push","attributes","join","html","confirm","remove","this","children","newGal","replace"],"mappings":"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","file":"admin.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\njQuery(document).ready(function () {\n  var image_modal; // Jquery on image button click\n\n  jQuery('#snoxel8v_main_image_button').click(function (e) {\n    e.preventDefault(); // check if media modal already  exists if yes re open it\n\n    if (image_modal) {\n      image_modal.open();\n      return;\n    } // setup media modal\n\n\n    image_modal = wp.media({\n      title: snoxel8v_main_image.title,\n      button: {\n        text: snoxel8v_main_image.button\n      },\n      library: {\n        type: 'image'\n      }\n    }); // on select\n\n    image_modal.on('select', function () {\n      //  Creates JSON of selection\n      var attachment = image_modal.state().get('selection').first().toJSON(); // add attachment url to custom hidden image input field\n\n      jQuery('#snoxel8v_main_image').val(attachment.url); // add closing / deleting x to image\n\n      jQuery('.snoxel8v-main-image-container').append('<span class=\"snoxel8v-delete-button\"></span>'); //if the image is smaller than the thumbnail size use the main URL otherwise attach the thumbnail URL\n\n      if (typeof attachment.sizes.thumbnail === 'undefined') {\n        jQuery('#snoxel8v_main_image_src').attr('src', attachment.url);\n      } else {\n        jQuery('#snoxel8v_main_image_src').attr('src', attachment.sizes.thumbnail.url);\n      }\n    }); // open modal\n\n    image_modal.open();\n  });\n  var gallery_modal;\n  jQuery('#snoxel8v_gallery_gallery_button').click(function (e) {\n    e.preventDefault();\n\n    if (gallery_modal) {\n      gallery_modal.open();\n      return;\n    } // setup gallery modal \n\n\n    gallery_modal = wp.media({\n      title: 'Media Library',\n      button: {\n        text: 'SELECT'\n      },\n      library: {\n        type: 'image'\n      },\n      multiple: 'add' // 'add' instead of true actually works\n\n    }); // add gallery state\n\n    /*      gallery_modal.states.add([\r\n             new wp.media.controller.Library ({\r\n                 id: 'snoxel8v-gallery',\r\n                 title: 'Select your Images',\r\n                 priority: 200,\r\n                 toolbar: 'main-gallery',\r\n                 filterable: false,\r\n                 library: wp.media.query(gallery_modal.options.library),\r\n                 multiple: 'add',\r\n                 editable: true,\r\n                 allowLocalEdits: true,\r\n                 displaySettings: false,\r\n                 displayUserSettings: true,\r\n                 syncSelection: true\r\n               }),\r\n            \r\n         ]); */\n\n    gallery_modal.on('open', function () {\n      var images = gallery_modal.state().get('selection');\n      var lib = gallery_modal.state('gallery-edit').get('library');\n      var ids = jQuery('#snoxel8v_gallery_gallery').val();\n      var idArray;\n\n      if (ids) {\n        idArray = ids.split(',');\n        idArray.forEach(function (id) {\n          var attachment = wp.media.attachment(id);\n          attachment.fetch();\n          images.add(attachment ? [attachment] : []);\n        });\n      }\n    });\n    gallery_modal.on('ready', function () {\n      jQuery('.media-modal').addClass('no-sidebar');\n    }); // callback when image is selected \n\n    gallery_modal.on('select', function () {\n      var imageIDs = [];\n      var imageHtml = '';\n      var metaDataString = '';\n      var images = gallery_modal.state().get('selection');\n      imageHtml += '<div class=\"snoxel8v_gallery_array\">';\n      images.each(function (attachment) {\n        imageIDs.push(attachment.attributes.id);\n\n        if (typeof attachment.attributes.sizes.thumbnail === 'undefined') {\n          imageHtml += '<div class=\"snoxel8v-gallery-item\"><span class=\"snoxel8v-gallery-delete-button\"><img id=\"' + attachment.attributes.id + '\" src=\"' + attachment.attributes.url + '\"></span></div>';\n        } else {\n          imageHtml += '<div class=\"snoxel8v-gallery-item\"><span class=\"snoxel8v-gallery-delete-button\"><img id=\"' + attachment.attributes.id + '\" src=\"' + attachment.attributes.sizes.thumbnail.url + '\"></span></div>';\n        }\n      });\n      imageHtml += '</div>';\n      metaDataString = imageIDs.join(',');\n\n      if (metaDataString) {\n        jQuery('#snoxel8v_gallery_gallery').val(metaDataString);\n        jQuery('#snoxel8v_gallery_gallery_src').html(imageHtml);\n      }\n    });\n    gallery_modal.open();\n  }); // delete main image selection\n\n  jQuery(document).on('click', '.snoxel8v-delete-button', function (e) {\n    e.preventDefault();\n\n    if (confirm('Are you sure you want to unselect the main image?')) {\n      jQuery('.snoxel8v-delete-button').remove();\n      jQuery('#snoxel8v_main_image_src').attr('src', '');\n      jQuery('#snoxel8v_main_image').val('');\n    }\n  });\n  jQuery(document).on('click', '.snoxel8v-gallery-delete-button', function (e) {\n    e.preventDefault();\n\n    if (confirm('Are you sure you want to unselect this image?')) {\n      var remove = jQuery(this).children('img').attr('id');\n      var oldGal = jQuery('#snoxel8v_gallery_gallery').val();\n      var newGal = oldGal.replace(',' + remove, '').replace(remove + ',', '').replace(remove, '');\n      jQuery(this).remove();\n      jQuery('#snoxel8v_gallery_gallery').val(newGal);\n    }\n  });\n});\n\n},{}]},{},[1]);\n"]}